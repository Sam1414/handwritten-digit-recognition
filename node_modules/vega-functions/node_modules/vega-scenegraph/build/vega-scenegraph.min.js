var vega=function(t,n,i,e,s){"use strict";let r=0;const o="p_";function h(t){return t&&t.gradient}function a(t,n,i){const e=t.gradient;let s=t.id,h="radial"===e?o:"";return s||(s=t.id="gradient_"+r++,"radial"===e?(t.x1=l(t.x1,.5),t.y1=l(t.y1,.5),t.r1=l(t.r1,0),t.x2=l(t.x2,.5),t.y2=l(t.y2,.5),t.r2=l(t.r2,.5),h=o):(t.x1=l(t.x1,0),t.y1=l(t.y1,0),t.x2=l(t.x2,1),t.y2=l(t.y2,0))),n[s]=t,"url("+(i||"")+"#"+h+s+")"}function l(t,n){return null!=t?t:n}const c=Math.PI,u=2*c,_=1e-6,f=u-_;function d(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function p(){return new d}function y(t){return function(){return t}}d.prototype=p.prototype={constructor:d,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,i,e){this._+="Q"+ +t+","+ +n+","+(this._x1=+i)+","+(this._y1=+e)},bezierCurveTo:function(t,n,i,e,s,r){this._+="C"+ +t+","+ +n+","+ +i+","+ +e+","+(this._x1=+s)+","+(this._y1=+r)},arcTo:function(t,n,i,e,s){t=+t,n=+n,i=+i,e=+e,s=+s;var r=this._x1,o=this._y1,h=i-t,a=e-n,l=r-t,u=o-n,f=l*l+u*u;if(s<0)throw new Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(f>_)if(Math.abs(u*h-a*l)>_&&s){var d=i-r,p=e-o,y=h*h+a*a,x=d*d+p*p,g=Math.sqrt(y),v=Math.sqrt(f),m=s*Math.tan((c-Math.acos((y+f-x)/(2*g*v)))/2),b=m/v,k=m/g;Math.abs(b-1)>_&&(this._+="L"+(t+b*l)+","+(n+b*u)),this._+="A"+s+","+s+",0,0,"+ +(u*d>l*p)+","+(this._x1=t+k*h)+","+(this._y1=n+k*a)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,i,e,s,r){t=+t,n=+n,r=!!r;var o=(i=+i)*Math.cos(e),h=i*Math.sin(e),a=t+o,l=n+h,d=1^r,p=r?e-s:s-e;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+a+","+l:(Math.abs(this._x1-a)>_||Math.abs(this._y1-l)>_)&&(this._+="L"+a+","+l),i&&(p<0&&(p=p%u+u),p>f?this._+="A"+i+","+i+",0,1,"+d+","+(t-o)+","+(n-h)+"A"+i+","+i+",0,1,"+d+","+(this._x1=a)+","+(this._y1=l):p>_&&(this._+="A"+i+","+i+",0,"+ +(p>=c)+","+d+","+(this._x1=t+i*Math.cos(s))+","+(this._y1=n+i*Math.sin(s))))},rect:function(t,n,i,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +i+"v"+ +e+"h"+-i+"Z"},toString:function(){return this._}};var x=Math.abs,g=Math.atan2,v=Math.cos,m=Math.max,b=Math.min,k=Math.sin,w=Math.sqrt,T=1e-12,M=Math.PI,A=M/2,S=2*M;function C(t){return t>1?0:t<-1?M:Math.acos(t)}function N(t){return t>=1?A:t<=-1?-A:Math.asin(t)}function z(t){return t.innerRadius}function R(t){return t.outerRadius}function P(t){return t.startAngle}function E(t){return t.endAngle}function L(t){return t&&t.padAngle}function O(t,n,i,e,s,r,o,h){var a=i-t,l=e-n,c=o-s,u=h-r,_=u*a-c*l;if(!(_*_<T))return[t+(_=(c*(n-r)-u*(t-s))/_)*a,n+_*l]}function q(t,n,i,e,s,r,o){var h=t-i,a=n-e,l=(o?r:-r)/w(h*h+a*a),c=l*a,u=-l*h,_=t+c,f=n+u,d=i+c,p=e+u,y=(_+d)/2,x=(f+p)/2,g=d-_,v=p-f,b=g*g+v*v,k=s-r,T=_*p-d*f,M=(v<0?-1:1)*w(m(0,k*k*b-T*T)),A=(T*v-g*M)/b,S=(-T*g-v*M)/b,C=(T*v+g*M)/b,N=(-T*g+v*M)/b,z=A-y,R=S-x,P=C-y,E=N-x;return z*z+R*R>P*P+E*E&&(A=C,S=N),{cx:A,cy:S,x01:-c,y01:-u,x11:A*(s/k-1),y11:S*(s/k-1)}}function D(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function I(t){this._context=t}function V(t){return new I(t)}function H(t){return t[0]}function B(t){return t[1]}function j(t,n){var i=y(!0),e=null,s=V,r=null;function o(o){var h,a,l,c=(o=D(o)).length,u=!1;for(null==e&&(r=s(l=p())),h=0;h<=c;++h)!(h<c&&i(a=o[h],h,o))===u&&((u=!u)?r.lineStart():r.lineEnd()),u&&r.point(+t(a,h,o),+n(a,h,o));if(l)return r=null,l+""||null}return t="function"==typeof t?t:void 0===t?H:y(t),n="function"==typeof n?n:void 0===n?B:y(n),o.x=function(n){return arguments.length?(t="function"==typeof n?n:y(+n),o):t},o.y=function(t){return arguments.length?(n="function"==typeof t?t:y(+t),o):n},o.defined=function(t){return arguments.length?(i="function"==typeof t?t:y(!!t),o):i},o.curve=function(t){return arguments.length?(s=t,null!=e&&(r=s(e)),o):s},o.context=function(t){return arguments.length?(null==t?e=r=null:r=s(e=t),o):e},o}function G(t,n,i){var e=null,s=y(!0),r=null,o=V,h=null;function a(a){var l,c,u,_,f,d=(a=D(a)).length,y=!1,x=new Array(d),g=new Array(d);for(null==r&&(h=o(f=p())),l=0;l<=d;++l){if(!(l<d&&s(_=a[l],l,a))===y)if(y=!y)c=l,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),u=l-1;u>=c;--u)h.point(x[u],g[u]);h.lineEnd(),h.areaEnd()}y&&(x[l]=+t(_,l,a),g[l]=+n(_,l,a),h.point(e?+e(_,l,a):x[l],i?+i(_,l,a):g[l]))}if(f)return h=null,f+""||null}function l(){return j().defined(s).curve(o).context(r)}return t="function"==typeof t?t:void 0===t?H:y(+t),n="function"==typeof n?n:y(void 0===n?0:+n),i="function"==typeof i?i:void 0===i?B:y(+i),a.x=function(n){return arguments.length?(t="function"==typeof n?n:y(+n),e=null,a):t},a.x0=function(n){return arguments.length?(t="function"==typeof n?n:y(+n),a):t},a.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:y(+t),a):e},a.y=function(t){return arguments.length?(n="function"==typeof t?t:y(+t),i=null,a):n},a.y0=function(t){return arguments.length?(n="function"==typeof t?t:y(+t),a):n},a.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:y(+t),a):i},a.lineX0=a.lineY0=function(){return l().x(t).y(n)},a.lineY1=function(){return l().x(t).y(i)},a.lineX1=function(){return l().x(e).y(n)},a.defined=function(t){return arguments.length?(s="function"==typeof t?t:y(!!t),a):s},a.curve=function(t){return arguments.length?(o=t,null!=r&&(h=o(r)),a):o},a.context=function(t){return arguments.length?(null==t?r=h=null:h=o(r=t),a):r},a}I.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var W={draw:function(t,n){var i=Math.sqrt(n/M);t.moveTo(i,0),t.arc(0,0,i,0,S)}};function X(){}function U(t,n,i){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+i)/6)}function F(t){this._context=t}function Y(t){this._context=t}function J(t){this._context=t}function Z(t,n){this._basis=new F(t),this._beta=n}F.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:U(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:U(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Y.prototype={areaStart:X,areaEnd:X,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:U(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},J.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+t)/6,e=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(i,e):this._context.moveTo(i,e);break;case 3:this._point=4;default:U(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},Z.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,i=t.length-1;if(i>0)for(var e,s=t[0],r=n[0],o=t[i]-s,h=n[i]-r,a=-1;++a<=i;)e=a/i,this._basis.point(this._beta*t[a]+(1-this._beta)*(s+e*o),this._beta*n[a]+(1-this._beta)*(r+e*h));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var $=function t(n){function i(t){return 1===n?new F(t):new Z(t,n)}return i.beta=function(n){return t(+n)},i}(.85);function Q(t,n,i){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-i),t._x2,t._y2)}function K(t,n){this._context=t,this._k=(1-n)/6}K.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Q(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:Q(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var tt=function t(n){function i(t){return new K(t,n)}return i.tension=function(n){return t(+n)},i}(0);function nt(t,n){this._context=t,this._k=(1-n)/6}nt.prototype={areaStart:X,areaEnd:X,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Q(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var it=function t(n){function i(t){return new nt(t,n)}return i.tension=function(n){return t(+n)},i}(0);function et(t,n){this._context=t,this._k=(1-n)/6}et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Q(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var st=function t(n){function i(t){return new et(t,n)}return i.tension=function(n){return t(+n)},i}(0);function rt(t,n,i){var e=t._x1,s=t._y1,r=t._x2,o=t._y2;if(t._l01_a>T){var h=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,a=3*t._l01_a*(t._l01_a+t._l12_a);e=(e*h-t._x0*t._l12_2a+t._x2*t._l01_2a)/a,s=(s*h-t._y0*t._l12_2a+t._y2*t._l01_2a)/a}if(t._l23_a>T){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);r=(r*l+t._x1*t._l23_2a-n*t._l12_2a)/c,o=(o*l+t._y1*t._l23_2a-i*t._l12_2a)/c}t._context.bezierCurveTo(e,s,r,o,t._x2,t._y2)}function ot(t,n){this._context=t,this._alpha=n}ot.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var i=this._x2-t,e=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:rt(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var ht=function t(n){function i(t){return n?new ot(t,n):new K(t,0)}return i.alpha=function(n){return t(+n)},i}(.5);function at(t,n){this._context=t,this._alpha=n}at.prototype={areaStart:X,areaEnd:X,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var i=this._x2-t,e=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:rt(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var lt=function t(n){function i(t){return n?new at(t,n):new nt(t,0)}return i.alpha=function(n){return t(+n)},i}(.5);function ct(t,n){this._context=t,this._alpha=n}ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var i=this._x2-t,e=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+e*e,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rt(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var ut=function t(n){function i(t){return n?new ct(t,n):new et(t,0)}return i.alpha=function(n){return t(+n)},i}(.5);function _t(t){this._context=t}function ft(t){return t<0?-1:1}function dt(t,n,i){var e=t._x1-t._x0,s=n-t._x1,r=(t._y1-t._y0)/(e||s<0&&-0),o=(i-t._y1)/(s||e<0&&-0),h=(r*s+o*e)/(e+s);return(ft(r)+ft(o))*Math.min(Math.abs(r),Math.abs(o),.5*Math.abs(h))||0}function pt(t,n){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-n)/2:n}function yt(t,n,i){var e=t._x0,s=t._y0,r=t._x1,o=t._y1,h=(r-e)/3;t._context.bezierCurveTo(e+h,s+h*n,r-h,o-h*i,r,o)}function xt(t){this._context=t}function gt(t){this._context=new vt(t)}function vt(t){this._context=t}function mt(t){this._context=t}function bt(t){var n,i,e=t.length-1,s=new Array(e),r=new Array(e),o=new Array(e);for(s[0]=0,r[0]=2,o[0]=t[0]+2*t[1],n=1;n<e-1;++n)s[n]=1,r[n]=4,o[n]=4*t[n]+2*t[n+1];for(s[e-1]=2,r[e-1]=7,o[e-1]=8*t[e-1]+t[e],n=1;n<e;++n)i=s[n]/r[n-1],r[n]-=i,o[n]-=i*o[n-1];for(s[e-1]=o[e-1]/r[e-1],n=e-2;n>=0;--n)s[n]=(o[n]-s[n+1])/r[n];for(r[e-1]=(t[e]+s[e-1])/2,n=0;n<e-1;++n)r[n]=2*t[n+1]-s[n+1];return[s,r]}function kt(t,n){this._context=t,this._t=n}_t.prototype={areaStart:X,areaEnd:X,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yt(this,this._t0,pt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var i=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,yt(this,pt(this,i=dt(this,t,n)),i);break;default:yt(this,this._t0,i=dt(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=i}}},(gt.prototype=Object.create(xt.prototype)).point=function(t,n){xt.prototype.point.call(this,n,t)},vt.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,i,e,s,r){this._context.bezierCurveTo(n,t,e,i,r,s)}},mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,i=t.length;if(i)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===i)this._context.lineTo(t[1],n[1]);else for(var e=bt(t),s=bt(n),r=0,o=1;o<i;++r,++o)this._context.bezierCurveTo(e[0][r],s[0][r],e[1][r],s[1][r],t[o],n[o]);(this._line||0!==this._line&&1===i)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}},kt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var i=this._x*(1-this._t)+t*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,n)}}this._x=t,this._y=n}};const wt={basis:{curve:function(t){return new F(t)}},"basis-closed":{curve:function(t){return new Y(t)}},"basis-open":{curve:function(t){return new J(t)}},bundle:{curve:$,tension:"beta",value:.85},cardinal:{curve:tt,tension:"tension",value:0},"cardinal-open":{curve:st,tension:"tension",value:0},"cardinal-closed":{curve:it,tension:"tension",value:0},"catmull-rom":{curve:ht,tension:"alpha",value:.5},"catmull-rom-closed":{curve:lt,tension:"alpha",value:.5},"catmull-rom-open":{curve:ut,tension:"alpha",value:.5},linear:{curve:V},"linear-closed":{curve:function(t){return new _t(t)}},monotone:{horizontal:function(t){return new gt(t)},vertical:function(t){return new xt(t)}},natural:{curve:function(t){return new mt(t)}},step:{curve:function(t){return new kt(t,.5)}},"step-after":{curve:function(t){return new kt(t,1)}},"step-before":{curve:function(t){return new kt(t,0)}}};function Tt(t,i,e){var s=n.hasOwnProperty(wt,t)&&wt[t],r=null;return s&&(r=s.curve||s[i||"vertical"],s.tension&&null!=e&&(r=r[s.tension](e))),r}const Mt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},At=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function St(t){const n=[];let i,e,s,r,o,h,a,l,c,u;const _=t.slice().replace(At[0],"###$1").split(At[1]).slice(1);for(a=0,c=_.length;a<c;++a){for(i=_[a],e=i.slice(1).trim().replace(At[2],"$1###$2").replace(At[3],"$1###$2").split(At[4]),o=i.charAt(0),s=[o],l=0,u=e.length;l<u;++l)(r=+e[l])===r&&s.push(r);if(h=Mt[o.toLowerCase()],s.length-1>h){const t=s.length;for(l=1,n.push([o].concat(s.slice(l,l+=h))),o="M"===o?"L":"m"===o?"l":o;l<t;l+=h)n.push([o].concat(s.slice(l,l+h)))}else n.push(s)}return n}const Ct=Math.PI/180,Nt=Math.PI/2,zt=2*Math.PI,Rt=Math.sqrt(3)/2;var Pt={},Et={},Lt=[].join;function Ot(t){const n=Lt.call(t);if(Et[n])return Et[n];var i=t[0],e=t[1],s=t[2],r=t[3],o=t[4],h=t[5],a=t[6],l=t[7];const c=l*o,u=-a*h,_=a*o,f=l*h,d=Math.cos(s),p=Math.sin(s),y=Math.cos(r),x=Math.sin(r),g=.5*(r-s),v=Math.sin(.5*g),m=8/3*v*v/Math.sin(g),b=i+d-m*p,k=e+p+m*d,w=i+y,T=e+x,M=w+m*x,A=T-m*y;return Et[n]=[c*b+u*k,_*b+f*k,c*M+u*A,_*M+f*A,c*w+u*T,_*w+f*T]}const qt=["l",0,0,0,0,0,0,0];function Dt(t,n,i){const e=qt[0]=t[0];if("a"===e||"A"===e)qt[1]=n*t[1],qt[2]=i*t[2],qt[3]=t[3],qt[4]=t[4],qt[5]=t[5],qt[6]=n*t[6],qt[7]=i*t[7];else if("h"===e||"H"===e)qt[1]=n*t[1];else if("v"===e||"V"===e)qt[1]=i*t[1];else for(var s=1,r=t.length;s<r;++s)qt[s]=(s%2==1?n:i)*t[s];return qt}function It(t,n,i,e,s,r){var o,h,a,l,c,u=null,_=0,f=0,d=0,p=0;null==i&&(i=0),null==e&&(e=0),null==s&&(s=1),null==r&&(r=s),t.beginPath&&t.beginPath();for(var y=0,x=n.length;y<x;++y){switch(o=n[y],1===s&&1===r||(o=Dt(o,s,r)),o[0]){case"l":_+=o[1],f+=o[2],t.lineTo(_+i,f+e);break;case"L":_=o[1],f=o[2],t.lineTo(_+i,f+e);break;case"h":_+=o[1],t.lineTo(_+i,f+e);break;case"H":_=o[1],t.lineTo(_+i,f+e);break;case"v":f+=o[1],t.lineTo(_+i,f+e);break;case"V":f=o[1],t.lineTo(_+i,f+e);break;case"m":_+=o[1],f+=o[2],t.moveTo(_+i,f+e);break;case"M":_=o[1],f=o[2],t.moveTo(_+i,f+e);break;case"c":h=_+o[5],a=f+o[6],d=_+o[3],p=f+o[4],t.bezierCurveTo(_+o[1]+i,f+o[2]+e,d+i,p+e,h+i,a+e),_=h,f=a;break;case"C":_=o[5],f=o[6],d=o[3],p=o[4],t.bezierCurveTo(o[1]+i,o[2]+e,d+i,p+e,_+i,f+e);break;case"s":h=_+o[3],a=f+o[4],d=2*_-d,p=2*f-p,t.bezierCurveTo(d+i,p+e,_+o[1]+i,f+o[2]+e,h+i,a+e),d=_+o[1],p=f+o[2],_=h,f=a;break;case"S":h=o[3],a=o[4],d=2*_-d,p=2*f-p,t.bezierCurveTo(d+i,p+e,o[1]+i,o[2]+e,h+i,a+e),_=h,f=a,d=o[1],p=o[2];break;case"q":h=_+o[3],a=f+o[4],d=_+o[1],p=f+o[2],t.quadraticCurveTo(d+i,p+e,h+i,a+e),_=h,f=a;break;case"Q":h=o[3],a=o[4],t.quadraticCurveTo(o[1]+i,o[2]+e,h+i,a+e),_=h,f=a,d=o[1],p=o[2];break;case"t":h=_+o[1],a=f+o[2],null===u[0].match(/[QqTt]/)?(d=_,p=f):"t"===u[0]?(d=2*_-l,p=2*f-c):"q"===u[0]&&(d=2*_-d,p=2*f-p),l=d,c=p,t.quadraticCurveTo(d+i,p+e,h+i,a+e),f=a,d=(_=h)+o[1],p=f+o[2];break;case"T":h=o[1],a=o[2],d=2*_-d,p=2*f-p,t.quadraticCurveTo(d+i,p+e,h+i,a+e),_=h,f=a;break;case"a":Vt(t,_+i,f+e,[o[1],o[2],o[3],o[4],o[5],o[6]+_+i,o[7]+f+e]),_+=o[6],f+=o[7];break;case"A":Vt(t,_+i,f+e,[o[1],o[2],o[3],o[4],o[5],o[6]+i,o[7]+e]),_=o[6],f=o[7];break;case"z":case"Z":t.closePath()}u=o}}function Vt(t,n,i,e){const s=function(t,n,i,e,s,r,o,h,a){const l=Lt.call(arguments);if(Pt[l])return Pt[l];const c=o*Ct,u=Math.sin(c),_=Math.cos(c),f=_*(h-t)*.5+u*(a-n)*.5,d=_*(a-n)*.5-u*(h-t)*.5;let p=f*f/((i=Math.abs(i))*i)+d*d/((e=Math.abs(e))*e);p>1&&(p=Math.sqrt(p),i*=p,e*=p);const y=_/i,x=u/i,g=-u/e,v=_/e,m=y*h+x*a,b=g*h+v*a,k=y*t+x*n,w=g*t+v*n;let T=1/((k-m)*(k-m)+(w-b)*(w-b))-.25;T<0&&(T=0);let M=Math.sqrt(T);r==s&&(M=-M);const A=.5*(m+k)-M*(w-b),S=.5*(b+w)+M*(k-m),C=Math.atan2(b-S,m-A);let N=Math.atan2(w-S,k-A)-C;N<0&&1===r?N+=zt:N>0&&0===r&&(N-=zt);const z=Math.ceil(Math.abs(N/(Nt+.001))),R=[];for(let t=0;t<z;++t){const n=C+t*N/z,s=C+(t+1)*N/z;R[t]=[A,S,n,s,i,e,u,_]}return Pt[l]=R}(e[5],e[6],e[0],e[1],e[3],e[4],e[2],n,i);for(let n=0;n<s.length;++n){const i=Ot(s[n]);t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5])}}const Ht=.5773502691896257,Bt={circle:{draw:function(t,n){const i=Math.sqrt(n)/2;t.moveTo(i,0),t.arc(0,0,i,0,zt)}},cross:{draw:function(t,n){var i=Math.sqrt(n)/2,e=i/2.5;t.moveTo(-i,-e),t.lineTo(-i,e),t.lineTo(-e,e),t.lineTo(-e,i),t.lineTo(e,i),t.lineTo(e,e),t.lineTo(i,e),t.lineTo(i,-e),t.lineTo(e,-e),t.lineTo(e,-i),t.lineTo(-e,-i),t.lineTo(-e,-e),t.closePath()}},diamond:{draw:function(t,n){const i=Math.sqrt(n)/2;t.moveTo(-i,0),t.lineTo(0,-i),t.lineTo(i,0),t.lineTo(0,i),t.closePath()}},square:{draw:function(t,n){var i=Math.sqrt(n),e=-i/2;t.rect(e,e,i,i)}},arrow:{draw:function(t,n){var i=Math.sqrt(n)/2,e=i/7,s=i/2.5,r=i/8;t.moveTo(-e,i),t.lineTo(e,i),t.lineTo(e,-r),t.lineTo(s,-r),t.lineTo(0,-i),t.lineTo(-s,-r),t.lineTo(-e,-r),t.closePath()}},wedge:{draw:function(t,n){var i=Math.sqrt(n)/2,e=Rt*i,s=e-i*Ht,r=i/4;t.moveTo(0,-e-s),t.lineTo(-r,e-s),t.lineTo(r,e-s),t.closePath()}},triangle:{draw:function(t,n){var i=Math.sqrt(n)/2,e=Rt*i,s=e-i*Ht;t.moveTo(0,-e-s),t.lineTo(-i,e-s),t.lineTo(i,e-s),t.closePath()}},"triangle-up":{draw:function(t,n){var i=Math.sqrt(n)/2,e=Rt*i;t.moveTo(0,-e),t.lineTo(-i,e),t.lineTo(i,e),t.closePath()}},"triangle-down":{draw:function(t,n){var i=Math.sqrt(n)/2,e=Rt*i;t.moveTo(0,e),t.lineTo(-i,-e),t.lineTo(i,-e),t.closePath()}},"triangle-right":{draw:function(t,n){var i=Math.sqrt(n)/2,e=Rt*i;t.moveTo(e,0),t.lineTo(-e,-i),t.lineTo(-e,i),t.closePath()}},"triangle-left":{draw:function(t,n){var i=Math.sqrt(n)/2,e=Rt*i;t.moveTo(-e,0),t.lineTo(e,-i),t.lineTo(e,i),t.closePath()}},stroke:{draw:function(t,n){const i=Math.sqrt(n)/2;t.moveTo(-i,0),t.lineTo(i,0)}}};function jt(t){return n.hasOwnProperty(Bt,t)?Bt[t]:function(t){if(!n.hasOwnProperty(Gt,t)){const n=St(t);Gt[t]={draw:function(t,i){It(t,n,0,0,Math.sqrt(i)/2)}}}return Gt[t]}(t)}var Gt={};const Wt=.448084975506;function Xt(t){return t.x}function Ut(t){return t.y}function Ft(t){return t.width}function Yt(t){return t.height}function Jt(t){return"function"==typeof t?t:()=>+t}function Zt(t,n,i){return Math.max(n,Math.min(t,i))}function $t(){var t=Xt,n=Ut,i=Ft,e=Yt,s=Jt(0),r=s,o=s,h=s,a=null;function l(l,c,u){var _,f=null!=c?c:+t.call(this,l),d=null!=u?u:+n.call(this,l),y=+i.call(this,l),x=+e.call(this,l),g=Math.min(y,x)/2,v=Zt(+s.call(this,l),0,g),m=Zt(+r.call(this,l),0,g),b=Zt(+o.call(this,l),0,g),k=Zt(+h.call(this,l),0,g);if(a||(a=_=p()),v<=0&&m<=0&&b<=0&&k<=0)a.rect(f,d,y,x);else{var w=f+y,T=d+x;a.moveTo(f+v,d),a.lineTo(w-m,d),a.bezierCurveTo(w-Wt*m,d,w,d+Wt*m,w,d+m),a.lineTo(w,T-k),a.bezierCurveTo(w,T-Wt*k,w-Wt*k,T,w-k,T),a.lineTo(f+b,T),a.bezierCurveTo(f+Wt*b,T,f,T-Wt*b,f,T-b),a.lineTo(f,d+v),a.bezierCurveTo(f,d+Wt*v,f+Wt*v,d,f+v,d),a.closePath()}if(_)return a=null,_+""||null}return l.x=function(n){return arguments.length?(t=Jt(n),l):t},l.y=function(t){return arguments.length?(n=Jt(t),l):n},l.width=function(t){return arguments.length?(i=Jt(t),l):i},l.height=function(t){return arguments.length?(e=Jt(t),l):e},l.cornerRadius=function(t,n,i,e){return arguments.length?(s=Jt(t),r=null!=n?Jt(n):s,h=null!=i?Jt(i):s,o=null!=e?Jt(e):r,l):s},l.context=function(t){return arguments.length?(a=null==t?null:t,l):a},l}function Qt(){var t,n,i,e,s,r,o,h,a=null;function l(t,n,i){const e=i/2;if(s){var l=o-n,c=t-r;if(l||c){var u=Math.sqrt(l*l+c*c),_=(l/=u)*h,f=(c/=u)*h,d=Math.atan2(c,l);a.moveTo(r-_,o-f),a.lineTo(t-l*e,n-c*e),a.arc(t,n,e,d-Math.PI,d),a.lineTo(r+_,o+f),a.arc(r,o,h,d,d+Math.PI)}else a.arc(t,n,e,0,zt);a.closePath()}else s=1;r=t,o=n,h=e}function c(r){var o,h,c,u=r.length,_=!1;for(null==a&&(a=c=p()),o=0;o<=u;++o)!(o<u&&e(h=r[o],o,r))===_&&(_=!_)&&(s=0),_&&l(+t(h,o,r),+n(h,o,r),+i(h,o,r));if(c)return a=null,c+""||null}return c.x=function(n){return arguments.length?(t=n,c):t},c.y=function(t){return arguments.length?(n=t,c):n},c.size=function(t){return arguments.length?(i=t,c):i},c.defined=function(t){return arguments.length?(e=t,c):e},c.context=function(t){return arguments.length?(a=null==t?null:t,c):a},c}function Kt(t,n){return null!=t?t:n}const tn=t=>t.x||0,nn=t=>t.y||0,en=t=>!(!1===t.defined),sn=function(){var t=z,n=R,i=y(0),e=null,s=P,r=E,o=L,h=null;function a(){var a,l,c=+t.apply(this,arguments),u=+n.apply(this,arguments),_=s.apply(this,arguments)-A,f=r.apply(this,arguments)-A,d=x(f-_),y=f>_;if(h||(h=a=p()),u<c&&(l=u,u=c,c=l),u>T)if(d>S-T)h.moveTo(u*v(_),u*k(_)),h.arc(0,0,u,_,f,!y),c>T&&(h.moveTo(c*v(f),c*k(f)),h.arc(0,0,c,f,_,y));else{var m,z,R=_,P=f,E=_,L=f,D=d,I=d,V=o.apply(this,arguments)/2,H=V>T&&(e?+e.apply(this,arguments):w(c*c+u*u)),B=b(x(u-c)/2,+i.apply(this,arguments)),j=B,G=B;if(H>T){var W=N(H/c*k(V)),X=N(H/u*k(V));(D-=2*W)>T?(E+=W*=y?1:-1,L-=W):(D=0,E=L=(_+f)/2),(I-=2*X)>T?(R+=X*=y?1:-1,P-=X):(I=0,R=P=(_+f)/2)}var U=u*v(R),F=u*k(R),Y=c*v(L),J=c*k(L);if(B>T){var Z,$=u*v(P),Q=u*k(P),K=c*v(E),tt=c*k(E);if(d<M&&(Z=O(U,F,K,tt,$,Q,Y,J))){var nt=U-Z[0],it=F-Z[1],et=$-Z[0],st=Q-Z[1],rt=1/k(C((nt*et+it*st)/(w(nt*nt+it*it)*w(et*et+st*st)))/2),ot=w(Z[0]*Z[0]+Z[1]*Z[1]);j=b(B,(c-ot)/(rt-1)),G=b(B,(u-ot)/(rt+1))}}I>T?G>T?(m=q(K,tt,U,F,u,G,y),z=q($,Q,Y,J,u,G,y),h.moveTo(m.cx+m.x01,m.cy+m.y01),G<B?h.arc(m.cx,m.cy,G,g(m.y01,m.x01),g(z.y01,z.x01),!y):(h.arc(m.cx,m.cy,G,g(m.y01,m.x01),g(m.y11,m.x11),!y),h.arc(0,0,u,g(m.cy+m.y11,m.cx+m.x11),g(z.cy+z.y11,z.cx+z.x11),!y),h.arc(z.cx,z.cy,G,g(z.y11,z.x11),g(z.y01,z.x01),!y))):(h.moveTo(U,F),h.arc(0,0,u,R,P,!y)):h.moveTo(U,F),c>T&&D>T?j>T?(m=q(Y,J,$,Q,c,-j,y),z=q(U,F,K,tt,c,-j,y),h.lineTo(m.cx+m.x01,m.cy+m.y01),j<B?h.arc(m.cx,m.cy,j,g(m.y01,m.x01),g(z.y01,z.x01),!y):(h.arc(m.cx,m.cy,j,g(m.y01,m.x01),g(m.y11,m.x11),!y),h.arc(0,0,c,g(m.cy+m.y11,m.cx+m.x11),g(z.cy+z.y11,z.cx+z.x11),y),h.arc(z.cx,z.cy,j,g(z.y11,z.x11),g(z.y01,z.x01),!y))):h.arc(0,0,c,L,E,y):h.lineTo(Y,J)}else h.moveTo(0,0);if(h.closePath(),a)return h=null,a+""||null}return a.centroid=function(){var i=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,e=(+s.apply(this,arguments)+ +r.apply(this,arguments))/2-M/2;return[v(e)*i,k(e)*i]},a.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:y(+n),a):t},a.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:y(+t),a):n},a.cornerRadius=function(t){return arguments.length?(i="function"==typeof t?t:y(+t),a):i},a.padRadius=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:y(+t),a):e},a.startAngle=function(t){return arguments.length?(s="function"==typeof t?t:y(+t),a):s},a.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:y(+t),a):r},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:y(+t),a):o},a.context=function(t){return arguments.length?(h=null==t?null:t,a):h},a}().startAngle(t=>t.startAngle||0).endAngle(t=>t.endAngle||0).padAngle(t=>t.padAngle||0).innerRadius(t=>t.innerRadius||0).outerRadius(t=>t.outerRadius||0).cornerRadius(t=>t.cornerRadius||0),rn=G().x(tn).y1(nn).y0(t=>(t.y||0)+(t.height||0)).defined(en),on=G().y(nn).x1(tn).x0(t=>(t.x||0)+(t.width||0)).defined(en),hn=j().x(tn).y(nn).defined(en),an=$t().x(tn).y(nn).width(t=>t.width||0).height(t=>t.height||0).cornerRadius(t=>Kt(t.cornerRadiusTopLeft,t.cornerRadius)||0,t=>Kt(t.cornerRadiusTopRight,t.cornerRadius)||0,t=>Kt(t.cornerRadiusBottomRight,t.cornerRadius)||0,t=>Kt(t.cornerRadiusBottomLeft,t.cornerRadius)||0),ln=function(t,n){var i=null;function e(){var e;if(i||(i=e=p()),t.apply(this,arguments).draw(i,+n.apply(this,arguments)),e)return i=null,e+""||null}return t="function"==typeof t?t:y(t||W),n="function"==typeof n?n:y(void 0===n?64:+n),e.type=function(n){return arguments.length?(t="function"==typeof n?n:y(n),e):t},e.size=function(t){return arguments.length?(n="function"==typeof t?t:y(+t),e):n},e.context=function(t){return arguments.length?(i=null==t?null:t,e):i},e}().type(t=>jt(t.shape||"circle")).size(t=>Kt(t.size,64)),cn=Qt().x(tn).y(nn).defined(en).size(t=>t.size||1);function un(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function _n(t,n,i,e){return an.context(t)(n,i,e)}var fn=1;function dn(){fn=1}function pn(t,i,e){var s=i.clip,r=t._defs,o=i.clip_id||(i.clip_id="clip"+fn++),h=r.clipping[o]||(r.clipping[o]={id:o});return n.isFunction(s)?h.path=s(null):un(e)?h.path=_n(null,e,0,0):(h.width=e.width||0,h.height=e.height||0),"url(#"+o+")"}function yn(t){this.clear(),t&&this.union(t)}function xn(t){this.mark=t,this.bounds=this.bounds||new yn}function gn(t){xn.call(this,t),this.items=this.items||[]}function vn(t){this._pending=0,this._loader=t||e.loader()}function mn(t){t._pending+=1}function bn(t){t._pending-=1}function kn(t,n,i){if(n.stroke&&0!==n.opacity&&0!==n.strokeOpacity){const e=null!=n.strokeWidth?+n.strokeWidth:1;t.expand(e+(i?function(t,n){return t.strokeJoin&&"miter"!==t.strokeJoin?0:n}(n,e):0))}return t}yn.prototype={clone(){return new yn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,n,i,e){return i<t?(this.x2=t,this.x1=i):(this.x1=t,this.x2=i),e<n?(this.y2=n,this.y1=e):(this.y1=n,this.y2=e),this},add(t,n){return t<this.x1&&(this.x1=t),n<this.y1&&(this.y1=n),t>this.x2&&(this.x2=t),n>this.y2&&(this.y2=n),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,n){return this.x1+=t,this.x2+=t,this.y1+=n,this.y2+=n,this},rotate(t,n,i){const e=this.rotatedPoints(t,n,i);return this.clear().add(e[0],e[1]).add(e[2],e[3]).add(e[4],e[5]).add(e[6],e[7])},rotatedPoints(t,n,i){var{x1:e,y1:s,x2:r,y2:o}=this,h=Math.cos(t),a=Math.sin(t),l=n-n*h+i*a,c=i-n*a-i*h;return[h*e-a*s+l,a*e+h*s+c,h*e-a*o+l,a*e+h*o+c,h*r-a*s+l,a*r+h*s+c,h*r-a*o+l,a*r+h*o+c]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,n){return!(t<this.x1||t>this.x2||n<this.y1||n>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},n.inherits(gn,xn),vn.prototype={pending(){return this._pending},sanitizeURL(t){const n=this;return mn(n),n._loader.sanitize(t,{context:"href"}).then(t=>(bn(n),t)).catch(()=>(bn(n),null))},loadImage(t){const e=this,s=i.image();return mn(e),e._loader.sanitize(t,{context:"image"}).then(t=>{const i=t.href;if(!i||!s)throw{url:i};const r=new s,o=n.hasOwnProperty(t,"crossOrigin")?t.crossOrigin:"anonymous";return null!=o&&(r.crossOrigin=o),r.onload=()=>bn(e),r.onerror=()=>bn(e),r.src=i,r}).catch(t=>(bn(e),{complete:!1,width:0,height:0,src:t&&t.url||""}))},ready(){const t=this;return new Promise(n=>{!function i(e){t.pending()?setTimeout(()=>{i(!0)},10):n(e)}(!1)})}};const wn=zt-1e-8;let Tn,Mn,An,Sn,Cn,Nn,zn,Rn;const Pn=(t,n)=>Tn.add(t,n),En=(t,n)=>Pn(Mn=t,An=n),Ln=t=>Pn(t,Tn.y1),On=t=>Pn(Tn.x1,t),qn=(t,n)=>Cn*t+zn*n,Dn=(t,n)=>Nn*t+Rn*n,In=(t,n)=>Pn(qn(t,n),Dn(t,n)),Vn=(t,n)=>En(qn(t,n),Dn(t,n));function Hn(t,n){return Tn=t,n?(Sn=n*Ct,Cn=Rn=Math.cos(Sn),Nn=Math.sin(Sn),zn=-Nn):(Cn=Rn=1,Sn=Nn=zn=0),Bn}const Bn={beginPath(){},closePath(){},moveTo:Vn,lineTo:Vn,rect(t,n,i,e){Sn?(In(t+i,n),In(t+i,n+e),In(t,n+e),Vn(t,n)):(Pn(t+i,n+e),En(t,n))},quadraticCurveTo(t,n,i,e){const s=qn(t,n),r=Dn(t,n),o=qn(i,e),h=Dn(i,e);jn(Mn,s,o,Ln),jn(An,r,h,On),En(o,h)},bezierCurveTo(t,n,i,e,s,r){const o=qn(t,n),h=Dn(t,n),a=qn(i,e),l=Dn(i,e),c=qn(s,r),u=Dn(s,r);Gn(Mn,o,a,c,Ln),Gn(An,h,l,u,On),En(c,u)},arc(t,n,i,e,s,r){if(e+=Sn,s+=Sn,Mn=i*Math.cos(s)+t,An=i*Math.sin(s)+n,Math.abs(s-e)>wn)Pn(t-i,n-i),Pn(t+i,n+i);else{const o=e=>Pn(i*Math.cos(e)+t,i*Math.sin(e)+n);let h,a;if(o(e),o(s),s!==e)if((e%=zt)<0&&(e+=zt),(s%=zt)<0&&(s+=zt),s<e&&(r=!r,h=e,e=s,s=h),r)for(s-=zt,h=e-e%Nt,a=0;a<4&&h>s;++a,h-=Nt)o(h);else for(h=e-e%Nt+Nt,a=0;a<4&&h<s;++a,h+=Nt)o(h)}}};function jn(t,n,i,e){const s=(t-n)/(t+i-2*n);0<s&&s<1&&e(t+(n-t)*s)}function Gn(t,n,i,e,s){const r=e-t+3*n-3*i,o=t+i-2*n,h=t-n;let a,l=0,c=0;Math.abs(r)>1e-14?(a=o*o+h*r,a>=0&&(a=Math.sqrt(a),l=(-o+a)/r,c=(-o-a)/r)):l=.5*h/o,0<l&&l<1&&s(Wn(l,t,n,i,e)),0<c&&c<1&&s(Wn(c,t,n,i,e))}function Wn(t,n,i,e,s){const r=1-t,o=r*r,h=t*t;return o*r*n+3*o*t*i+3*r*h*e+h*t*s}var Xn=(Xn=i.canvas(1,1))?Xn.getContext("2d"):null;const Un=new yn;function Fn(t){return function(n,i){if(!Xn)return!0;t(Xn,n),Un.clear().union(n.bounds).intersect(i).round();const{x1:e,y1:s,x2:r,y2:o}=Un;for(let t=s;t<=o;++t)for(let n=e;n<=r;++n)if(Xn.isPointInPath(n,t))return!0;return!1}}function Yn(t,n){return n.contains(t.x||0,t.y||0)}function Jn(t,n){const i=t.x||0,e=t.y||0,s=t.width||0,r=t.height||0;return n.intersects(Un.set(i,e,i+s,e+r))}function Zn(t,n){const i=t.x||0,e=t.y||0;return $n(n,i,e,null!=t.x2?t.x2:i,null!=t.y2?t.y2:e)}function $n(t,n,i,e,s){const{x1:r,y1:o,x2:h,y2:a}=t,l=e-n,c=s-i;let u,_,f,d,p=0,y=1;for(d=0;d<4;++d){if(0===d&&(u=-l,_=-(r-n)),1===d&&(u=l,_=h-n),2===d&&(u=-c,_=-(o-i)),3===d&&(u=c,_=a-i),Math.abs(u)<1e-10&&_<0)return!1;if(f=_/u,u<0){if(f>y)return!1;f>p&&(p=f)}else if(u>0){if(f<p)return!1;f<y&&(y=f)}}return!0}function Qn(t,n){t.globalCompositeOperation=n.blend||"source-over"}function Kn(t,n){return null==t?n:t}function ti(t,n){const i=n.length;for(let e=0;e<i;++e)t.addColorStop(n[e].offset,n[e].color);return t}function ni(t,n,e){return h(e)?function(t,n,e){const s=e.width(),r=e.height();let o;if("radial"===n.gradient)o=t.createRadialGradient(e.x1+Kn(n.x1,.5)*s,e.y1+Kn(n.y1,.5)*r,Math.max(s,r)*Kn(n.r1,0),e.x1+Kn(n.x2,.5)*s,e.y1+Kn(n.y2,.5)*r,Math.max(s,r)*Kn(n.r2,.5));else{const h=Kn(n.x1,0),a=Kn(n.y1,0),l=Kn(n.x2,1),c=Kn(n.y2,0);if(h!==l&&a!==c&&s!==r){const e=i.canvas(Math.ceil(s),Math.ceil(r)),o=e.getContext("2d");return o.scale(s,r),o.fillStyle=ti(o.createLinearGradient(h,a,l,c),n.stops),o.fillRect(0,0,s,r),t.createPattern(e,"no-repeat")}o=t.createLinearGradient(e.x1+h*s,e.y1+a*r,e.x1+l*s,e.y1+c*r)}return ti(o,n.stops)}(t,e,n.bounds):e}function ii(t,n,i){return(i*=null==n.fillOpacity?1:n.fillOpacity)>0&&(t.globalAlpha=i,t.fillStyle=ni(t,n,n.fill),!0)}var ei=[];function si(t,n,i){var e=null!=(e=n.strokeWidth)?e:1;return!(e<=0)&&((i*=null==n.strokeOpacity?1:n.strokeOpacity)>0&&(t.globalAlpha=i,t.strokeStyle=ni(t,n,n.stroke),t.lineWidth=e,t.lineCap=n.strokeCap||"butt",t.lineJoin=n.strokeJoin||"miter",t.miterLimit=n.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(n.strokeDash||ei),t.lineDashOffset=n.strokeDashOffset||0),!0))}function ri(t,n){return t.zindex-n.zindex||t.index-n.index}function oi(t){if(!t.zdirty)return t.zitems;var n,i,e,s=t.items,r=[];for(i=0,e=s.length;i<e;++i)(n=s[i]).index=i,n.zindex&&r.push(n);return t.zdirty=!1,t.zitems=r.sort(ri)}function hi(t,n){var i,e,s=t.items;if(!s||!s.length)return;const r=oi(t);if(r&&r.length){for(i=0,e=s.length;i<e;++i)s[i].zindex||n(s[i]);s=r}for(i=0,e=s.length;i<e;++i)n(s[i])}function ai(t,n){var i,e,s=t.items;if(!s||!s.length)return null;const r=oi(t);for(r&&r.length&&(s=r),e=s.length;--e>=0;)if(i=n(s[e]))return i;if(s===r)for(e=(s=t.items).length;--e>=0;)if(!s[e].zindex&&(i=n(s[e])))return i;return null}function li(t){return function(n,i,e){hi(i,i=>{e&&!e.intersects(i.bounds)||ui(t,n,i,i)})}}function ci(t){return function(n,i,e){!i.items.length||e&&!e.intersects(i.bounds)||ui(t,n,i.items[0],i.items)}}function ui(t,n,i,e){var s=null==i.opacity?1:i.opacity;0!==s&&(t(n,e)||(Qn(n,i),i.fill&&ii(n,i,s)&&n.fill(),i.stroke&&si(n,i,s)&&n.stroke()))}function _i(t){return t=t||n.truthy,function(n,i,e,s,r,o){return e*=n.pixelRatio,s*=n.pixelRatio,ai(i,i=>{const h=i.bounds;if((!h||h.contains(r,o))&&h)return t(n,i,e,s,r,o)?i:void 0})}}function fi(t,n){return function(i,e,s,r){var o,h,a=Array.isArray(e)?e[0]:e,l=null==n?a.fill:n,c=a.stroke&&i.isPointInStroke;return c&&(o=a.strokeWidth,h=a.strokeCap,i.lineWidth=null!=o?o:1,i.lineCap=null!=h?h:"butt"),!t(i,e)&&(l&&i.isPointInPath(s,r)||c&&i.isPointInStroke(s,r))}}function di(t){return _i(fi(t))}function pi(t,n){return"translate("+t+","+n+")"}function yi(t){return"rotate("+t+")"}function xi(t){return pi(t.x||0,t.y||0)}function gi(t,n,i){function e(t,i){var e=i.x||0,s=i.y||0,r=i.angle||0;t.translate(e,s),r&&t.rotate(r*=Ct),t.beginPath(),n(t,i),r&&t.rotate(-r),t.translate(-e,-s)}return{type:t,tag:"path",nested:!1,attr:function(t,i){t("transform",function(t){return pi(t.x||0,t.y||0)+(t.angle?" "+yi(t.angle):"")}(i)),t("d",n(null,i))},bound:function(t,i){return n(Hn(t,i.angle),i),kn(t,i).translate(i.x||0,i.y||0)},draw:li(e),pick:di(e),isect:i||Fn(e)}}var vi=gi("arc",(function(t,n){return sn.context(t)(n)}));function mi(t,n,i){function e(t,i){t.beginPath(),n(t,i)}const s=fi(e);return{type:t,tag:"path",nested:!0,attr:function(t,i){var e=i.mark.items;e.length&&t("d",n(null,e))},bound:function(t,i){var e=i.items;return 0===e.length?t:(n(Hn(t),e),kn(t,e[0]))},draw:ci(e),pick:function(t,n,i,e,r,o){var h=n.items,a=n.bounds;return!h||!h.length||a&&!a.contains(r,o)?null:(i*=t.pixelRatio,e*=t.pixelRatio,s(t,h,i,e)?h[0]:null)},isect:Yn,tip:i}}var bi=mi("area",(function(t,n){const i=n[0],e=i.interpolate||"linear";return("horizontal"===i.orient?on:rn).curve(Tt(e,i.orient,i.tension)).context(t)(n)}),(function(t,n){for(var i,e,s="horizontal"===t[0].orient?n[1]:n[0],r="horizontal"===t[0].orient?"y":"x",o=t.length,h=1/0;--o>=0;)!1!==t[o].defined&&(e=Math.abs(t[o][r]-s))<h&&(h=e,i=t[o]);return i}));function ki(t,n){t.beginPath(),un(n)?_n(t,n,0,0):t.rect(0,0,n.width||0,n.height||0),t.clip()}function wi(t){const n=Kn(t.strokeWidth,1);return null!=t.strokeOffset?t.strokeOffset:t.stroke&&n>.5&&n<1.5?.5-Math.abs(n-1):0}function Ti(t,n){const i=wi(n);t("d",_n(null,n,i,i))}function Mi(t,n,i,e){const s=wi(n);t.beginPath(),_n(t,n,(i||0)+s,(e||0)+s)}const Ai=fi(Mi),Si=fi(Mi,!1),Ci=fi(Mi,!0);var Ni={type:"group",tag:"g",nested:!1,attr:function(t,n){t("transform",xi(n))},bound:function(t,n){if(!n.clip&&n.items){const i=n.items,e=i.length;for(let n=0;n<e;++n)t.union(i[n].bounds)}return(n.clip||n.width||n.height)&&!n.noBound&&t.add(0,0).add(n.width||0,n.height||0),kn(t,n),t.translate(n.x||0,n.y||0)},draw:function(t,n,i){hi(n,n=>{const e=n.x||0,s=n.y||0,r=n.strokeForeground,o=null==n.opacity?1:n.opacity;(n.stroke||n.fill)&&o&&(Mi(t,n,e,s),Qn(t,n),n.fill&&ii(t,n,o)&&t.fill(),n.stroke&&!r&&si(t,n,o)&&t.stroke()),t.save(),t.translate(e,s),n.clip&&ki(t,n),i&&i.translate(-e,-s),hi(n,n=>{this.draw(t,n,i)}),i&&i.translate(e,s),t.restore(),r&&n.stroke&&o&&(Mi(t,n,e,s),Qn(t,n),si(t,n,o)&&t.stroke())})},pick:function(t,n,i,e,s,r){if(n.bounds&&!n.bounds.contains(s,r)||!n.items)return null;const o=i*t.pixelRatio,h=e*t.pixelRatio;return ai(n,a=>{let l,c,u;const _=a.bounds;if(_&&!_.contains(s,r))return;c=a.x||0,u=a.y||0;const f=c+(a.width||0),d=u+(a.height||0),p=a.clip;if(p&&(s<c||s>f||r<u||r>d))return;if(t.save(),t.translate(c,u),c=s-c,u=r-u,p&&un(a)&&!Ci(t,a,o,h))return t.restore(),null;const y=a.strokeForeground,x=!1!==n.interactive;return x&&y&&a.stroke&&Si(t,a,o,h)?(t.restore(),a):(l=ai(a,t=>function(t,n,i){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(n,i)}(t,c,u)?this.pick(t,i,e,c,u):null),!l&&x&&(a.fill||!y&&a.stroke)&&Ai(t,a,o,h)&&(l=a),t.restore(),l||null)})},isect:Jn,content:function(t,n,i){t("clip-path",n.clip?pn(i,n,n):null)},background:function(t,n){t("class","background"),t("aria-hidden",!0),Ti(t,n)},foreground:function(t,n){t("class","foreground"),t("aria-hidden",!0),n.strokeForeground?Ti(t,n):t("d","")}},zi={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Ri(t,n){var i=t.image;return(!i||t.url&&t.url!==i.url)&&(i={complete:!1,width:0,height:0},n.loadImage(t.url).then(n=>{t.image=n,t.image.url=t.url})),i}function Pi(t,n){return null!=t.width?t.width:n&&n.width?!1!==t.aspect&&t.height?t.height*n.width/n.height:n.width:0}function Ei(t,n){return null!=t.height?t.height:n&&n.height?!1!==t.aspect&&t.width?t.width*n.height/n.width:n.height:0}function Li(t,n){return"center"===t?n/2:"right"===t?n:0}function Oi(t,n){return"middle"===t?n/2:"bottom"===t?n:0}var qi={type:"image",tag:"image",nested:!1,attr:function(t,n,i){const e=Ri(n,i),s=Pi(n,e),r=Ei(n,e),o=(n.x||0)-Li(n.align,s),h=(n.y||0)-Oi(n.baseline,r);t("href",!e.src&&e.toDataURL?e.toDataURL():e.src||"",zi["xmlns:xlink"],"xlink:href"),t("transform",pi(o,h)),t("width",s),t("height",r),t("preserveAspectRatio",!1===n.aspect?"none":"xMidYMid")},bound:function(t,n){const i=n.image,e=Pi(n,i),s=Ei(n,i),r=(n.x||0)-Li(n.align,e),o=(n.y||0)-Oi(n.baseline,s);return t.set(r,o,r+e,o+s)},draw:function(t,n,i){hi(n,n=>{if(i&&!i.intersects(n.bounds))return;const e=Ri(n,this);let s,r,o,h,a=Pi(n,e),l=Ei(n,e),c=(n.x||0)-Li(n.align,a),u=(n.y||0)-Oi(n.baseline,l);!1!==n.aspect&&(r=e.width/e.height,o=n.width/n.height,r==r&&o==o&&r!==o&&(o<r?(h=a/r,u+=(l-h)/2,l=h):(h=l*r,c+=(a-h)/2,a=h))),(e.complete||e.toDataURL)&&(Qn(t,n),t.globalAlpha=null!=(s=n.opacity)?s:1,t.imageSmoothingEnabled=!1!==n.smooth,t.drawImage(e,c,u,a,l))})},pick:_i(),isect:n.truthy,get:Ri,xOffset:Li,yOffset:Oi},Di=mi("line",(function(t,n){const i=n[0],e=i.interpolate||"linear";return hn.curve(Tt(e,i.orient,i.tension)).context(t)(n)}),(function(t,n){for(var i,e,s=Math.pow(t[0].strokeWidth||1,2),r=t.length;--r>=0;)if(!1!==t[r].defined&&(i=t[r].x-n[0])*i+(e=t[r].y-n[1])*e<s)return t[r];return null}));function Ii(t,n){var i=n.path;if(null==i)return!0;var e=n.x||0,s=n.y||0,r=n.scaleX||1,o=n.scaleY||1,h=(n.angle||0)*Ct,a=n.pathCache;a&&a.path===i||((n.pathCache=a=St(i)).path=i),h&&t.rotate&&t.translate?(t.translate(e,s),t.rotate(h),It(t,a,0,0,r,o),t.rotate(-h),t.translate(-e,-s)):It(t,a,e,s,r,o)}var Vi={type:"path",tag:"path",nested:!1,attr:function(t,n){var i=n.scaleX||1,e=n.scaleY||1;1===i&&1===e||t("vector-effect","non-scaling-stroke"),t("transform",function(t){return pi(t.x||0,t.y||0)+(t.angle?" "+yi(t.angle):"")+(t.scaleX||t.scaleY?" "+(n=t.scaleX||1,i=t.scaleY||1,"scale("+n+","+i+")"):"");var n,i}(n)),t("d",n.path)},bound:function(t,n){return Ii(Hn(t,n.angle),n)?t.set(0,0,0,0):kn(t,n,!0)},draw:li(Ii),pick:di(Ii),isect:Fn(Ii)};function Hi(t,n){t.beginPath(),_n(t,n)}var Bi={type:"rect",tag:"path",nested:!1,attr:function(t,n){t("d",_n(null,n))},bound:function(t,n){var i,e;return kn(t.set(i=n.x||0,e=n.y||0,i+n.width||0,e+n.height||0),n)},draw:li(Hi),pick:di(Hi),isect:Jn};function ji(t,n,i){var e,s,r,o;return!(!n.stroke||!si(t,n,i))&&(e=n.x||0,s=n.y||0,r=null!=n.x2?n.x2:e,o=null!=n.y2?n.y2:s,t.beginPath(),t.moveTo(e,s),t.lineTo(r,o),!0)}var Gi={type:"rule",tag:"line",nested:!1,attr:function(t,n){t("transform",xi(n)),t("x2",null!=n.x2?n.x2-(n.x||0):0),t("y2",null!=n.y2?n.y2-(n.y||0):0)},bound:function(t,n){var i,e;return kn(t.set(i=n.x||0,e=n.y||0,null!=n.x2?n.x2:i,null!=n.y2?n.y2:e),n)},draw:function(t,n,i){hi(n,n=>{if(!i||i.intersects(n.bounds)){var e=null==n.opacity?1:n.opacity;e&&ji(t,n,e)&&(Qn(t,n),t.stroke())}})},pick:_i((function(t,n,i,e){return!!t.isPointInStroke&&(ji(t,n,1)&&t.isPointInStroke(i,e))})),isect:Zn},Wi=gi("shape",(function(t,n){return(n.mark.shape||n.shape).context(t)(n)})),Xi=gi("symbol",(function(t,n){return ln.context(t)(n)}),Yn);const Ui=n.lruCache();var Fi={height:Ki,measureWidth:$i,estimateWidth:Ji,width:Ji,canvas:Yi};function Yi(t){Fi.width=t&&Xn?$i:Ji}function Ji(t,n){return Zi(ie(t,n),Ki(t))}function Zi(t,n){return~~(.8*t.length*n)}function $i(t,n){return Ki(t)<=0||!(n=ie(t,n))?0:Qi(n,se(t))}function Qi(t,n){const i="(".concat(n,") ").concat(t);let e=Ui.get(i);return void 0===e&&(Xn.font=n,e=Xn.measureText(t).width,Ui.set(i,e)),e}function Ki(t){return null!=t.fontSize?+t.fontSize||0:11}function te(t){return null!=t.lineHeight?t.lineHeight:Ki(t)+2}function ne(t){return i=t.lineBreak&&t.text&&!n.isArray(t.text)?t.text.split(t.lineBreak):t.text,n.isArray(i)?i.length>1?i:i[0]:i;var i}function ie(t,n){const i=null==n?"":(n+"").trim();return t.limit>0&&i.length?function(t,n){var i=+t.limit,e=function(t){if(Fi.width===$i){const n=se(t);return t=>Qi(t,n)}{const n=Ki(t);return t=>Zi(t,n)}}(t);if(e(n)<i)return n;var s,r=t.ellipsis||"â€¦",o="rtl"===t.dir,h=0,a=n.length;if(i-=e(r),o){for(;h<a;)s=h+a>>>1,e(n.slice(s))>i?h=s+1:a=s;return r+n.slice(h)}for(;h<a;)s=1+(h+a>>>1),e(n.slice(0,s))<i?h=s:a=s-1;return n.slice(0,h)+r}(t,i):i}function ee(t,n){var i=t.font;return(n&&i?String(i).replace(/"/g,"'"):i)||"sans-serif"}function se(t,n){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Ki(t)+"px "+ee(t,n)}function re(t){var n=t.baseline,i=Ki(t);return Math.round("top"===n?.79*i:"middle"===n?.3*i:"bottom"===n?-.21*i:"line-top"===n?.29*i+.5*te(t):"line-bottom"===n?.29*i-.5*te(t):0)}Yi(!0);const oe={left:"start",center:"middle",right:"end"},he=new yn;function ae(t){var n,i=t.x||0,e=t.y||0,s=t.radius||0;return s&&(n=(t.theta||0)-Nt,i+=s*Math.cos(n),e+=s*Math.sin(n)),he.x1=i,he.y1=e,he}function le(t,i,e){var s,r=Fi.height(i),o=i.align,h=ae(i),a=h.x1,l=h.y1,c=i.dx||0,u=(i.dy||0)+re(i)-Math.round(.8*r),_=ne(i);if(n.isArray(_)?(r+=te(i)*(_.length-1),s=_.reduce((t,n)=>Math.max(t,Fi.width(i,n)),0)):s=Fi.width(i,_),"center"===o?c-=s/2:"right"===o&&(c-=s),t.set(c+=a,u+=l,c+s,u+r),i.angle&&!e)t.rotate(i.angle*Ct,a,l);else if(2===e)return t.rotatedPoints(i.angle*Ct,a,l);return t}var ce={arc:vi,area:bi,group:Ni,image:qi,line:Di,path:Vi,rect:Bi,rule:Gi,shape:Wi,symbol:Xi,text:{type:"text",tag:"text",nested:!1,attr:function(t,n){var i,e=n.dx||0,s=(n.dy||0)+re(n),r=ae(n),o=r.x1,h=r.y1,a=n.angle||0;t("text-anchor",oe[n.align]||"start"),a?(i=pi(o,h)+" "+yi(a),(e||s)&&(i+=" "+pi(e,s))):i=pi(o+e,h+s),t("transform",i)},bound:le,draw:function(t,i,e){hi(i,i=>{var s,r,o,h,a,l,c,u=null==i.opacity?1:i.opacity;if(!(e&&!e.intersects(i.bounds)||0===u||i.fontSize<=0||null==i.text||0===i.text.length)){if(t.font=se(i),t.textAlign=i.align||"left",r=(s=ae(i)).x1,o=s.y1,i.angle&&(t.save(),t.translate(r,o),t.rotate(i.angle*Ct),r=o=0),r+=i.dx||0,o+=(i.dy||0)+re(i),l=ne(i),Qn(t,i),n.isArray(l))for(a=te(i),h=0;h<l.length;++h)c=ie(i,l[h]),i.fill&&ii(t,i,u)&&t.fillText(c,r,o),i.stroke&&si(t,i,u)&&t.strokeText(c,r,o),o+=a;else c=ie(i,l),i.fill&&ii(t,i,u)&&t.fillText(c,r,o),i.stroke&&si(t,i,u)&&t.strokeText(c,r,o);i.angle&&t.restore()}})},pick:_i((function(t,n,i,e,s,r){if(n.fontSize<=0)return!1;if(!n.angle)return!0;var o=ae(n),h=o.x1,a=o.y1,l=le(he,n,1),c=-n.angle*Ct,u=Math.cos(c),_=Math.sin(c),f=u*s-_*r+(h-u*h+_*a),d=_*s+u*r+(a-_*h-u*a);return l.contains(f,d)})),isect:function(t,n){const i=le(he,t,2);return $n(n,i[0],i[1],i[2],i[3])||$n(n,i[0],i[1],i[4],i[5])||$n(n,i[4],i[5],i[6],i[7])||$n(n,i[2],i[3],i[6],i[7])}},trail:mi("trail",(function(t,n){return cn.context(t)(n)}),(function(t,n){for(var i,e,s=t.length;--s>=0;)if(!1!==t[s].defined&&(i=t[s].x-n[0])*i+(e=t[s].y-n[1])*e<(i=t[s].size||1)*i)return t[s];return null}))};function ue(t,n,i){var e=ce[t.mark.marktype],s=n||e.bound;return e.nested&&(t=t.mark),s(t.bounds||(t.bounds=new yn),t,i)}var _e={mark:null};function fe(t,n,i){var e,s,r,o,h=ce[t.marktype],a=h.bound,l=t.items,c=l&&l.length;if(h.nested)return c?r=l[0]:(_e.mark=t,r=_e),o=ue(r,a,i),n=n&&n.union(o)||o;if(n=n||t.bounds&&t.bounds.clear()||new yn,c)for(e=0,s=l.length;e<s;++e)n.union(ue(l[e],a,i));return t.bounds=n}const de=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function pe(t,n){return JSON.stringify(t,de,n)}function ye(t){return xe("string"==typeof t?JSON.parse(t):t)}function xe(t){var n,i,e,s=t.marktype,r=t.items;if(r)for(i=0,e=r.length;i<e;++i)n=s?"mark":"group",r[i][n]=t,r[i].zindex&&(r[i][n].zdirty=!0),"group"===(s||n)&&xe(r[i]);return s&&fe(t),t}function ge(t){arguments.length?this.root=ye(t):(this.root=ve({marktype:"group",name:"root",role:"frame"}),this.root.items=[new gn(this.root)])}function ve(t,n){const i={bounds:new yn,clip:!!t.clip,group:n,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return null!=t.aria&&(i.aria=t.aria),t.description&&(i.description=t.description),i}function me(t,n,i){return!t&&"undefined"!=typeof document&&document.createElement&&(t=document),t?i?t.createElementNS(i,n):t.createElement(n):null}function be(t,n){n=n.toLowerCase();for(var i=t.childNodes,e=0,s=i.length;e<s;++e)if(i[e].tagName.toLowerCase()===n)return i[e]}function ke(t,n,i,e){var s,r=t.childNodes[n];return r&&r.tagName.toLowerCase()===i.toLowerCase()||(s=r||null,r=me(t.ownerDocument,i,e),t.insertBefore(r,s)),r}function we(t,n){for(var i=t.childNodes,e=i.length;e>n;)t.removeChild(i[--e]);return t}function Te(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function Me(t,n){const i=n.getBoundingClientRect();return[t.clientX-i.left-(n.clientLeft||0),t.clientY-i.top-(n.clientTop||0)]}function Ae(t,n){this._active=null,this._handlers={},this._loader=t||e.loader(),this._tooltip=n||Se}function Se(t,n,i,e){t.element().setAttribute("title",e||"")}function Ce(t){this._el=null,this._bgcolor=null,this._loader=new vn(t)}ge.prototype={toJSON(t){return pe(this.root,t||0)},mark(t,n,i){const e=ve(t,n=n||this.root.items[0]);return n.items[i]=e,e.zindex&&(e.group.zdirty=!0),e}},Ae.prototype={initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,n,i){for(let e=t?t.length:0;--e>=0;)if(t[e].type===n&&(!i||t[e].handler===i))return e;return-1},handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const t in n)i.push(...n[t]);return i},eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)},handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(n=>{const i=new MouseEvent(t.type,t),e=me(null,"a");for(const t in n)e.setAttribute(t,n[t]);e.dispatchEvent(i)}).catch(()=>{})},handleTooltip(t,n,i){if(n&&null!=n.tooltip){n=function(t,n,i,e){var s,r,o=t&&t.mark;if(o&&(s=ce[o.marktype]).tip){for((r=Me(n,i))[0]-=e[0],r[1]-=e[1];t=t.mark.group;)r[0]-=t.x||0,r[1]-=t.y||0;t=s.tip(o.items,r)}return t}(n,t,this.canvas(),this._origin);const e=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,e)}},getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),e=this._origin,s=t.bounds,r=s.width(),o=s.height();let h=s.x1+e[0]+i.left,a=s.y1+e[1]+i.top;for(;t.mark&&(t=t.mark.group);)h+=t.x||0,a+=t.y||0;return{x:h,y:a,width:r,height:o,left:h,top:a,right:h+r,bottom:a+o}}},Ce.prototype={initialize(t,n,i,e,s){return this._el=t,this.resize(n,i,e,s)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},resize(t,n,i,e){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=e||1,this},dirty(){},render(t){const n=this;return n._call=function(){n._render(t)},n._call(),n._call=null,n},_render(){},renderAsync(t){const n=this.render(t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(t,n){var i=this,e=i._loader[t](n);if(!i._ready){const t=i._call;i._ready=i._loader.ready().then(n=>{n&&t(),i._ready=null})}return e},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};const Ne="dragenter",ze="dragleave",Re="dragover",Pe="mousedown",Ee="mousemove",Le="mouseout",Oe="mouseover",qe="click",De="mousewheel",Ie="touchstart",Ve="touchmove",He="touchend",Be=["keydown","keypress","keyup",Ne,ze,Re,Pe,"mouseup",Ee,Le,Oe,qe,"dblclick","wheel",De,Ie,Ve,He],je=Ee,Ge=Le,We=qe;function Xe(t,n){Ae.call(this,t,n),this._down=null,this._touch=null,this._first=!0,this._events={}}function Ue(t,n){(t=>t===Ie||t===Ve||t===He?[Ie,Ve,He]:[t])(n).forEach(n=>function(t,n){const i=t.canvas();i&&!t._events[n]&&(t._events[n]=1,i.addEventListener(n,t[n]?i=>t[n](i):i=>t.fire(n,i)))}(t,n))}function Fe(t,n,i){return function(e){const s=this._active,r=this.pickEvent(e);r===s||(s&&s.exit||this.fire(i,e),this._active=r,this.fire(n,e)),this.fire(t,e)}}function Ye(t){return function(n){this.fire(t,n),this._active=null}}n.inherits(Xe,Ae,{initialize(t,n,i){return this._canvas=t&&be(t,"canvas"),[qe,Pe,Ee,Le,ze].forEach(t=>Ue(this,t)),Ae.prototype.initialize.call(this,t,n,i)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:Be,DOMMouseScroll(t){this.fire(De,t)},mousemove:Fe(Ee,Oe,Le),dragover:Fe(Re,Ne,ze),mouseout:Ye(Le),dragleave:Ye(ze),mousedown(t){this._down=this._active,this.fire(Pe,t)},click(t){this._down===this._active&&(this.fire(qe,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Ie,t,!0)},touchmove(t){this.fire(Ve,t,!0)},touchend(t){this.fire(He,t,!0),this._touch=null},fire(t,n,i){const e=i?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===We&&e&&e.href?this.handleHref(n,e,e.href):t!==je&&t!==Ge||this.handleTooltip(n,e,t!==Ge),s)for(let t=0,i=s.length;t<i;++t)s[t].handler.call(this._obj,n,e)},on(t,n){const i=this.eventName(t),e=this._handlers;return this._handlerIndex(e[i],t,n)<0&&(Ue(this,t),(e[i]||(e[i]=[])).push({type:t,handler:n})),this},off(t,n){const i=this.eventName(t),e=this._handlers[i],s=this._handlerIndex(e,t,n);return s>=0&&e.splice(s,1),this},pickEvent(t){const n=Me(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])},pick(t,n,i,e,s){const r=this.context();return ce[t.marktype].pick.call(this,r,t,n,i,e,s)}});var Je="undefined"!=typeof window&&window.devicePixelRatio||1;function Ze(t){Ce.call(this,t),this._options={},this._redraw=!1,this._dirty=new yn,this._tempb=new yn}const $e=Ce.prototype;function Qe(t,n){Ae.call(this,t,n);const i=this;i._hrefHandler=Ke(i,(t,n)=>{n&&n.href&&i.handleHref(t,n,n.href)}),i._tooltipHandler=Ke(i,(t,n)=>{i.handleTooltip(t,n,t.type!==Ge)})}n.inherits(Ze,Ce,{initialize(t,n,e,s,r,o){return this._options=o||{},this._canvas=this._options.externalContext?null:i.canvas(1,1,this._options.type),t&&this._canvas&&(we(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),$e.initialize.call(this,t,n,e,s,r)},resize(t,i,e,s){if($e.resize.call(this,t,i,e,s),this._canvas)!function(t,n,i,e,s,r){const o="undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,h=t.getContext("2d"),a=o?Je:s;t.width=n*a,t.height=i*a;for(const t in r)h[t]=r[t];o&&1!==a&&(t.style.width=n+"px",t.style.height=i+"px"),h.pixelRatio=a,h.setTransform(a,0,0,a,a*e[0],a*e[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const t=this._options.externalContext;t||n.error("CanvasRenderer is missing a valid canvas or context"),t.scale(this._scale,this._scale),t.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)},_render(t){const n=this.context(),i=this._origin,e=this._width,s=this._height,r=this._dirty,o=(h=i,a=e,l=s,(new yn).set(0,0,a,l).translate(-h[0],-h[1]));var h,a,l;n.save();const c=this._redraw||r.empty()?(this._redraw=!1,o.expand(1)):function(t,n,i){return n.expand(1).round(),t.pixelRatio%1&&n.scale(t.pixelRatio).round().scale(1/t.pixelRatio),n.translate(-i[0]%1,-i[1]%1),t.beginPath(),t.rect(n.x1,n.y1,n.width(),n.height()),t.clip(),n}(n,o.intersect(r),i);return this.clear(-i[0],-i[1],e,s),this.draw(n,t,c),n.restore(),r.clear(),this},draw(t,i,e){const s=ce[i.marktype];i.clip&&function(t,i){var e=i.clip;t.save(),n.isFunction(e)?(t.beginPath(),e(t),t.clip()):ki(t,i.group)}(t,i),s.draw.call(this,t,i,e),i.clip&&t.restore()},clear(t,n,i,e){const s=this._options,r=this.context();"pdf"===s.type||s.externalContext||r.clearRect(t,n,i,e),null!=this._bgcolor&&(r.fillStyle=this._bgcolor,r.fillRect(t,n,i,e))}});const Ke=(t,n)=>i=>{let e=i.target.__data__;e=Array.isArray(e)?e[0]:e,i.vegaType=i.type,n.call(t._obj,i,e)};n.inherits(Qe,Ae,{initialize(t,n,i){let e=this._svg;return e&&(e.removeEventListener(We,this._hrefHandler),e.removeEventListener(je,this._tooltipHandler),e.removeEventListener(Ge,this._tooltipHandler)),this._svg=e=t&&be(t,"svg"),e&&(e.addEventListener(We,this._hrefHandler),e.addEventListener(je,this._tooltipHandler),e.addEventListener(Ge,this._tooltipHandler)),Ae.prototype.initialize.call(this,t,n,i)},canvas(){return this._svg},on(t,n){const i=this.eventName(t),e=this._handlers;if(this._handlerIndex(e[i],t,n)<0){const s={type:t,handler:n,listener:Ke(this,n)};(e[i]||(e[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this},off(t,n){const i=this.eventName(t),e=this._handlers[i],s=this._handlerIndex(e,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(i,e[s].listener),e.splice(s,1)),this}});const ts="aria-hidden",ns="aria-label",is="role",es="aria-roledescription",ss="graphics-object",rs="graphics-symbol",os=(t,n,i)=>({[is]:t,[es]:n,[ns]:i||void 0}),hs=n.toSet(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),as={axis:{desc:"axis",caption:function(t){const n=t.datum,i=t.orient,e=n.title?fs(t):null,r=t.context,o=r.scales[n.scale].value,h=r.dataflow.locale(),a=o.type;return"".concat("left"===i||"right"===i?"Y":"X","-axis")+(e?" titled '".concat(e,"'"):"")+" for a ".concat(s.isDiscrete(a)?"discrete":a," scale")+" with ".concat(s.domainCaption(h,o,t))}},legend:{desc:"legend",caption:function(t){const i=t.datum,e=i.title?fs(t):null,r="".concat(i.type||""," legend").trim(),o=i.scales,h=Object.keys(o),a=t.context,l=a.scales[o[h[0]]].value,c=a.dataflow.locale();return u=r,(u.length?u[0].toUpperCase()+u.slice(1):u)+(e?" titled '".concat(e,"'"):"")+" for ".concat(function(t){return(t=t.map(t=>t+("fill"===t||"stroke"===t?" color":""))).length<2?t[0]:t.slice(0,-1).join(", ")+" and "+n.peek(t)}(h))+" with ".concat(s.domainCaption(c,l,t));var u}},"title-text":{desc:"title",caption:t=>"Title text '".concat(_s(t),"'")},"title-subtitle":{desc:"subtitle",caption:t=>"Subtitle text '".concat(_s(t),"'")}},ls={ariaRole:is,ariaRoleDescription:es,description:ns};function cs(t,n){const i=!1===n.aria;if(t(ts,i||void 0),i||null==n.description)for(const n in ls)t(ls[n],void 0);else{const i=n.mark.marktype;t(ns,n.description),t(is,n.ariaRole||("group"===i?ss:rs)),t(es,n.ariaRoleDescription||"".concat(i," mark"))}}function us(t){return!1===t.aria?{[ts]:!0}:hs[t.role]?null:as[t.role]?function(t,n){try{const i=t.items[0],e=n.caption||(()=>"");return os(n.role||rs,n.desc,i.description||e(i))}catch(t){return null}}(t,as[t.role]):function(t){const n=t.marktype,i="group"===n||"text"===n||t.items.some(t=>null!=t.description&&!1!==t.aria);return os(i?ss:rs,"".concat(n," mark container"),t.description)}(t)}function _s(t){return n.array(t.text).join(" ")}function fs(t){try{return n.array(n.peek(t.items).items[0].text).join(" ")}catch(t){return null}}const ds=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function ps(){let t="",n="",i="";const e=[],s=()=>n=i="",r=(t,i)=>(null!=i&&(n+=" ".concat(t,'="').concat(ds(i).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"),'"')),o),o={open(h,...a){(r=>{n&&(t+="".concat(n,">").concat(i),s()),e.push(r)})(h),n="<"+h;for(const t of a)for(const n in t)r(n,t[n]);return o},close(){const r=e.pop();return t+=n?n+(i?">".concat(i,"</").concat(r,">"):"/>"):"</".concat(r,">"),s(),o},attr:r,text:t=>(i+=ds(t),o),toString:()=>t};return o}const ys=t=>xs(ps(),t)+"";function xs(t,n){if(t.open(n.tagName),n.hasAttributes()){const i=n.attributes,e=i.length;for(let n=0;n<e;++n)t.attr(i[n].name,i[n].value)}if(n.hasChildNodes()){const i=n.childNodes,e=i.length;for(let n=0;n<e;n++){const e=i[n];3===e.nodeType?t.text(e.nodeValue):xs(t,e)}}return t.close()}const gs={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},vs={fill:"none","stroke-miterlimit":10},ms=zi.xmlns;function bs(t){Ce.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const ks=Ce.prototype;function ws(t,n){for(;t&&t.dirty!==n;t=t.mark.group){if(t.dirty=n,!t.mark||t.mark.dirty===n)return;t.mark.dirty=n}}function Ts(t,n,i){let e,s,r;if("radial"===n.gradient){let e=ke(t,i++,"pattern",ms);Ps(e,{id:o+n.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e=ke(e,0,"rect",ms),Ps(e,{width:1,height:1,fill:"url(".concat(Ls(),"#").concat(n.id,")")}),Ps(t=ke(t,i++,"radialGradient",ms),{id:n.id,fx:n.x1,fy:n.y1,fr:n.r1,cx:n.x2,cy:n.y2,r:n.r2})}else Ps(t=ke(t,i++,"linearGradient",ms),{id:n.id,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2});for(e=0,s=n.stops.length;e<s;++e)r=ke(t,e,"stop",ms),r.setAttribute("offset",n.stops[e].offset),r.setAttribute("stop-color",n.stops[e].color);return we(t,e),i}function Ms(t,n,i){let e;return(t=ke(t,i,"clipPath",ms)).setAttribute("id",n.id),n.path?(e=ke(t,0,"path",ms),e.setAttribute("d",n.path)):(e=ke(t,0,"rect",ms),Ps(e,{x:0,y:0,width:n.width,height:n.height})),we(t,1),i+1}function As(t,n,i,e,s){let r,o=t._svg;if(!o&&(r=n.ownerDocument,o=me(r,e,ms),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===e))){const n=me(r,"path",ms);o.appendChild(n),n.__data__=t;const i=me(r,"g",ms);o.appendChild(i),i.__data__=t;const e=me(r,"path",ms);o.appendChild(e),e.__data__=t,e.__values__={fill:"default"}}return(o.ownerSVGElement!==s||function(t,n){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=n}(o,i))&&n.insertBefore(o,i?i.nextSibling:n.firstChild),o}n.inherits(bs,Ce,{initialize(t,n,i,e,s){return this._defs={},this._clearDefs(),t&&(this._svg=ke(t,0,"svg",ms),Ps(this._svg,zi),this._svg.setAttribute("class","marks"),we(t,1),this._root=ke(this._svg,0,"g",ms),Ps(this._root,vs),we(this._svg,1)),this.background(this._bgcolor),ks.initialize.call(this,t,n,i,e,s)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),ks.background.apply(this,arguments)},resize(t,n,i,e){return ks.resize.call(this,t,n,i,e),this._svg&&(Ps(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas(){return this._svg},svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=ke(t,0,"rect",ms),Ps(i,{width:this._width,height:this._height,fill:n}));const e=ys(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),e},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),we(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,e,s,r,o,h,a;for(o=0,h=t.length;o<h;++o)i=t[o],e=i.mark,e.marktype!==s&&(s=e.marktype,r=ce[s]),e.zdirty&&e.dirty!==n&&(this._dirtyAll=!1,ws(i,n),e.items.forEach(t=>{t.dirty=n})),e.zdirty||(i.exit?(r.nested&&e.items.length?(a=e.items[0],a._svg&&this._update(r,a._svg,a)):i._svg&&(a=i._svg.parentNode,a&&a.removeChild(i._svg)),i._svg=null):(i=r.nested?e.items[0]:i,i._update!==n&&(i._svg&&i._svg.ownerSVGElement?this._update(r,i._svg,i):(this._dirtyAll=!1,ws(i,n)),i._update=n)));return!this._dirtyAll},mark(t,n,i){if(!this.isDirty(n))return n._svg;const e=this._svg,s=ce[n.marktype],r=!1===n.interactive?"none":null,o="g"===s.tag;let h=null,a=0;const l=As(n,t,i,"g",e);l.setAttribute("class",Te(n));const c=us(n);for(const t in c)Es(l,t,c[t]);o||Es(l,"pointer-events",r),Es(l,"clip-path",n.clip?pn(this,n,n.group):null);const u=t=>{const n=this.isDirty(t),i=As(t,l,h,s.tag,e);n&&(this._update(s,i,t),o&&function(t,n,i){n=n.lastChild.previousSibling;let e,s=0;hi(i,i=>{e=t.mark(n,i,e),++s}),we(n,1+s)}(this,i,t)),h=i,++a};return s.nested?n.items.length&&u(n.items[0]):hi(n,u),we(l,a),l},_update(t,n,i){Ss=n,Cs=n.__values__,cs(zs,i),t.attr(zs,i,this);const e=Ns[t.type];e&&e.call(this,t,n,i),Ss&&this.style(Ss,i)},style(t,n){if(null!=n)for(const i in gs){let e="font"===i?ee(n):n[i];if(e===Cs[i])continue;const s=gs[i];null==e?t.removeAttribute(s):(h(e)&&(e=a(e,this._defs.gradient,Ls())),t.setAttribute(s,e+"")),Cs[i]=e}},defs(){const t=this._svg,n=this._defs;let i=n.el,e=0;for(const s in n.gradient)i||(n.el=i=ke(t,1,"defs",ms)),e=Ts(i,n.gradient[s],e);for(const s in n.clipping)i||(n.el=i=ke(t,1,"defs",ms)),e=Ms(i,n.clipping[s],e);i&&(0===e?(t.removeChild(i),n.el=null):we(i,e))},_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}});let Ss=null,Cs=null;const Ns={group(t,n,i){const e=Ss=n.childNodes[2];Cs=e.__values__,t.foreground(zs,i,this),Cs=n.__values__,Ss=n.childNodes[1],t.content(zs,i,this);const s=Ss=n.childNodes[0];t.background(zs,i,this);const r=!1===i.mark.interactive?"none":null;if(r!==Cs.events&&(Es(e,"pointer-events",r),Es(s,"pointer-events",r),Cs.events=r),i.strokeForeground&&i.stroke){const t=i.fill;Es(e,"display",null),this.style(s,i),Es(s,"stroke",null),t&&(i.fill=null),Cs=e.__values__,this.style(e,i),t&&(i.fill=t),Ss=null}else Es(e,"display","none")},image(t,n,i){!1===i.smooth?(Rs(n,"image-rendering","optimizeSpeed"),Rs(n,"image-rendering","pixelated")):Rs(n,"image-rendering",null)},text(t,i,e){const s=ne(e);let r,o,h,a;n.isArray(s)?(o=s.map(t=>ie(e,t)),r=o.join("\n"),r!==Cs.text&&(we(i,0),h=i.ownerDocument,a=te(e),o.forEach((t,n)=>{const s=me(h,"tspan",ms);s.__data__=e,s.textContent=t,n&&(s.setAttribute("x",0),s.setAttribute("dy",a)),i.appendChild(s)}),Cs.text=r)):(o=ie(e,s),o!==Cs.text&&(i.textContent=o,Cs.text=o)),Es(i,"font-family",ee(e)),Es(i,"font-size",Ki(e)+"px"),Es(i,"font-style",e.fontStyle),Es(i,"font-variant",e.fontVariant),Es(i,"font-weight",e.fontWeight)}};function zs(t,n,i){n!==Cs[t]&&(i?function(t,n,i,e){null!=i?t.setAttributeNS(e,n,i):t.removeAttributeNS(e,n)}(Ss,t,n,i):Es(Ss,t,n),Cs[t]=n)}function Rs(t,n,i){i!==Cs[n]&&(null==i?t.style.removeProperty(n):t.style.setProperty(n,i+""),Cs[n]=i)}function Ps(t,n){for(const i in n)Es(t,i,n[i])}function Es(t,n,i){null!=i?t.setAttribute(n,i):t.removeAttribute(n)}function Ls(){let t;return"undefined"==typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function Os(t){Ce.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}n.inherits(Os,Ce,{svg(){return this._text},_render(t){const i=ps();i.open("svg",n.extend({},zi,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));const e=this._bgcolor;return e&&"transparent"!==e&&"none"!==e&&i.open("rect",{width:this._width,height:this._height,fill:e}).close(),i.open("g",vs,{transform:"translate("+this._origin+")"}),this.mark(i,t),i.close(),this.defs(i),this._text=i.close()+"",this},mark(t,i){const e=ce[i.marktype],s=e.tag,r=[cs,e.attr];t.open("g",{class:Te(i),"clip-path":i.clip?pn(this,i,i.group):null},us(i),{"pointer-events":"g"!==s&&!1===i.interactive?"none":null});const o=o=>{const h=this.href(o);if(h&&t.open("a",h),t.open(s,this.attr(i,o,r,"g"!==s?s:null)),"text"===s){const i=ne(o);if(n.isArray(i)){const n={x:0,dy:te(o)};for(let e=0;e<i.length;++e)t.open("tspan",e?n:null).text(ie(o,i[e])).close()}else t.text(ie(o,i))}else if("g"===s){const n=o.strokeForeground,s=o.fill,r=o.stroke;n&&r&&(o.stroke=null),t.open("path",this.attr(i,o,e.background,"bgrect")).close(),t.open("g",this.attr(i,o,e.content)),hi(o,n=>this.mark(t,n)),t.close(),n&&r?(s&&(o.fill=null),o.stroke=r,t.open("path",this.attr(i,o,e.foreground,"bgrect")).close(),s&&(o.fill=s)):t.open("path",this.attr(i,o,e.foreground,"bgfore")).close()}t.close(),h&&t.close()};return e.nested?i.items&&i.items.length&&o(i.items[0]):hi(i,o),t.close()},href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(t=>{t["xlink:href"]=t.href,t.href=null,(this._hrefs||(this._hrefs={}))[n]=t})}return null},attr(t,n,i,e){const s={},r=(t,n,i,e)=>{s[e||t]=n};return Array.isArray(i)?i.forEach(t=>t(r,n,this)):i(r,n,this),e&&function(t,n,i,e,s){if(null==n)return t;"bgrect"===e&&!1===i.interactive&&(t["pointer-events"]="none");if("bgfore"===e&&(!1===i.interactive&&(t["pointer-events"]="none"),t.display="none",null!==n.fill))return t;"image"===e&&!1===n.smooth&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===e&&(t["font-family"]=ee(n),t["font-size"]=Ki(n)+"px",t["font-style"]=n.fontStyle,t["font-variant"]=n.fontVariant,t["font-weight"]=n.fontWeight);for(const i in gs){let e=n[i];const r=gs[i];("transparent"!==e||"fill"!==r&&"stroke"!==r)&&null!=e&&(h(e)&&(e=a(e,s.gradient,"")),t[r]=e)}}(s,n,t,e,this._defs),s},defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(0!==Object.keys(n).length+Object.keys(i).length){t.open("defs");for(const i in n){const e=n[i],s=e.stops;"radial"===e.gradient?(t.open("pattern",{id:o+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),t.close(),t.open("radialGradient",{id:i,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})):t.open("linearGradient",{id:i,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(let n=0;n<s.length;++n)t.open("stop",{offset:s[n].offset,"stop-color":s[n].color}).close();t.close()}for(const n in i){const e=i[n];t.open("clipPath",{id:n}),e.path?t.open("path",{d:e.path}).close():t.open("rect",{x:0,y:0,width:e.width,height:e.height}).close(),t.close()}t.close()}}});const qs="canvas",Ds="none",Is={Canvas:qs,PNG:"png",SVG:"svg",None:Ds},Vs={};function Hs(t,n,i,e){if(function(t,n,i){return t.bounds&&n.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!i||i(t)))}(t,n,i)){const s=t.items,r=t.marktype,o=s.length;let h=0;if("group"===r)for(;h<o;++h)Bs(s[h],n,i,e);else for(const t=ce[r].isect;h<o;++h){const i=s[h];js(i,n,t)&&e.push(i)}}return e}function Bs(t,n,i,e){i&&i(t.mark)&&js(t,n,ce.group.isect)&&e.push(t);const s=t.items,r=s&&s.length;if(r){const o=t.x||0,h=t.y||0;n.translate(-o,-h);for(let t=0;t<r;++t)Hs(s[t],n,i,e);n.translate(o,h)}return e}function js(t,n,i){const e=t.bounds;return n.encloses(e)||n.intersects(e)&&i(t,n)}Vs.canvas=Vs.png={renderer:Ze,headless:Ze,handler:Xe},Vs.svg={renderer:bs,headless:Os,handler:Qe},Vs.none={};const Gs=new yn;function Ws(t,i,e){return t===i||("path"===e?Xs(t,i):t instanceof Date&&i instanceof Date?+t==+i:n.isNumber(t)&&n.isNumber(i)?Math.abs(t-i)<=1e-9:t&&i&&(n.isObject(t)||n.isObject(i))?function(t,n){var i,e,s=Object.keys(t),r=Object.keys(n);if(s.length!==r.length)return!1;for(s.sort(),r.sort(),e=s.length-1;e>=0;e--)if(s[e]!=r[e])return!1;for(e=s.length-1;e>=0;e--)if(!Ws(t[i=s[e]],n[i],i))return!1;return typeof t==typeof n}(t,i):t==i)}function Xs(t,n){return Ws(St(t),St(n))}return t.Bounds=yn,t.CanvasHandler=Xe,t.CanvasRenderer=Ze,t.Gradient=function(t,n){var i,e=[];return i={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:n?n[0]:1,y2:n?n[1]:0,stops:e,stop:function(t,n){return e.push({offset:t,color:n}),i}}},t.GroupItem=gn,t.Handler=Ae,t.Item=xn,t.Marks=ce,t.RenderType=Is,t.Renderer=Ce,t.ResourceLoader=vn,t.SVGHandler=Qe,t.SVGRenderer=bs,t.SVGStringRenderer=Os,t.Scenegraph=ge,t.boundClip=function(t){const i=t.clip;if(n.isFunction(i))i(Hn(Gs.clear()));else{if(!i)return;Gs.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(Gs)},t.boundContext=Hn,t.boundItem=ue,t.boundMark=fe,t.boundStroke=kn,t.domChild=ke,t.domClear=we,t.domCreate=me,t.domFind=be,t.font=se,t.fontFamily=ee,t.fontSize=Ki,t.intersect=function(t,i,e){const s=[],r=(new yn).union(i),o=t.marktype;return o?Hs(t,r,e,s):"group"===o?Bs(t,r,e,s):n.error("Intersect scene must be mark node or group item.")},t.intersectBoxLine=$n,t.intersectPath=Fn,t.intersectPoint=Yn,t.intersectRule=Zn,t.lineHeight=te,t.markup=ps,t.multiLineOffset=function(t){const i=ne(t);return(n.isArray(i)?i.length-1:0)*te(t)},t.pathCurves=Tt,t.pathEqual=Xs,t.pathParse=St,t.pathRectangle=$t,t.pathRender=It,t.pathSymbols=jt,t.pathTrail=Qt,t.point=Me,t.renderModule=function(t,n){return t=String(t||"").toLowerCase(),arguments.length>1?(Vs[t]=n,this):Vs[t]},t.resetSVGClipId=dn,t.resetSVGDefIds=function(){dn(),r=0},t.sceneEqual=Ws,t.sceneFromJSON=ye,t.scenePickVisit=ai,t.sceneToJSON=pe,t.sceneVisit=hi,t.sceneZOrder=oi,t.serializeXML=ys,t.textMetrics=Fi,t}({},vega,vega,vega,vega);
//# sourceMappingURL=vega-scenegraph.min.js.map
